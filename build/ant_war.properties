product_name=CSKBankingApplication
product_version=1.0

app.dir=${basedir}/../
webapp.src=${app.dir}/src/main/webapp
java.src=${app.dir}/src/main/java
dest.dir=${app.dir}/output
build_dir=${app.dir}/temp
jars.dir=${dest.dir}/WEB-INF/lib
temp.dir=${app.dir}/temp
dep.dir=${temp.dir}/dependencies

#==============================================================================================#
#								BUILD ORDER 			 									   #
#==============================================================================================#

local_order=download,initialize,copy,compile,clean


download_order=geturl:jedis,geturl:mysql,geturl:simplecaptcha,geturl:mail,geturl:grecaptcha,getdep:zoho_deps

initialize_order=mkdir:output,deletetask:output,mkdir:output,mkdir:classes,deletetask:classes

copy_order=copytask:webapp,copytask:ext_jar,copytask:zs_agent,copytask:zs_commons,copytask:zs_conf,copytask:zs_webapps_conf,copytask:zl_jars,copytask:zl_log4j

compile_order=srccompile:source,jartask:war

clean_order=deletetask:output,deletetask:classes,mkdir:output,movefiletask:war

#==============================================================================================#
#						DOWNLOAD REQUIRED DEPENDENCY JARS 									   #
#==============================================================================================#

#Maven Dependencies

# servlet_url=https://repo1.maven.org/maven2/javax/servlet/javax.servlet-api/3.1.0/javax.servlet-api-3.1.0.jar
# servlet_dest_zip=${temp.dir}/javax.servlet-api-3.1.0.jar

jedis_url=https://repo1.maven.org/maven2/redis/clients/jedis/5.1.2/jedis-5.1.2.jar
jedis_dest_zip=${temp.dir}/jedis-5.1.2.jar

mysql_url=https://repo1.maven.org/maven2/com/mysql/mysql-connector-j/8.2.0/mysql-connector-j-8.2.0.jar
mysql_dest_zip=${temp.dir}/mysql-connector-j-8.2.0.jar

simplecaptcha_url=https://repo1.maven.org/maven2/com/liferay/nl.captcha.simplecaptcha/1.1.1/nl.captcha.simplecaptcha-1.1.1.jar
simplecaptcha_dest_zip=${temp.dir}/nl.captcha.simplecaptcha-1.1.1.jar

mail_url=https://repo1.maven.org/maven2/com/sun/mail/javax.mail/1.6.2/javax.mail-1.6.2.jar
mail_dest_zip=${temp.dir}/javax.mail-1.6.2.jar

grecaptcha_url=https://repo1.maven.org/maven2/com/google/cloud/google-cloud-recaptchaenterprise/3.40.0/google-cloud-recaptchaenterprise-3.40.0.jar
grecaptcha_dest_zip=${temp.dir}/google-cloud-recaptchaenterprise-3.40.0.jar

#Zoho Dependencies

zoho_deps_urls=ZohoSecurity,logsclient

ZohoSecurity=https://build.zohocorp.com/zoho/zohosecurity/milestones/master/ZOHOSECURITY_M2_34/ZohoSecurity.zip

logsclient=https://build.zohocorp.com/framework/zohologserver/milestones/Channel1/logsclient.zip

#==============================================================================================#
#								COPY REQUIRED JAR AND OTHER FILES							   #
#==============================================================================================#

ext_jar_copytask=${temp.dir},${jars.dir},**.jar

zs_agent_copytask=${dep.dir}/ZohoSecurity/ZohoSecurity/lib/agent,${jars.dir},**.jar,slf4j-jdk*.jar

zs_commons_copytask=${dep.dir}/ZohoSecurity/ZohoSecurity/lib,${jars.dir},commons-io-*.jar

zs_conf_copytask=${dep.dir}/ZohoSecurity/ZohoSecurity/conf,${dest.dir}/WEB-INF/conf,**

zs_webapps_conf_copytask=${dep.dir}/ZohoSecurity/ZohoSecurity/webapps/WEB-INF,${dest.dir}/WEB-INF/conf,**

zl_jars_copytask=${dep.dir}/logsclient/logclient/lib,${jars.dir},**,slf4j-jdk*.jar

zl_log4j_copytask=${dep.dir}/logsclient/logclient/dependencyLibs,${jars.dir},log4j-slf4j-impl-*.jar

#==============================================================================================#
#								INITIALIZING AND CLEAN UP 									   #
#==============================================================================================#

#A folder is created just to remove previous outputs
output_dirname=${dest.dir}

output_deletetask=${dest.dir},**

classes_dirname=${app.dir}/build/classes

classes_deletetask=${app.dir}/build/classes,**

webapp_copytask=${webapp.src},${dest.dir},**

war_movefiletask=${app.dir}/${product_name}_${product_version}.war,${dest.dir}/${product_name}_${product_version}.war

#==============================================================================================#
#								COMPILING AND CREATING WAR FILE 							   #
#==============================================================================================#

source_srccompile_classpath=${dest.dir}/WEB-INF/lib:/opt/tomcat/lib

source_srccompile_classes=${app.dir}/build/classes

source_srccompile_jar=${jars.dir}/${product_name}_${product_version}.jar

source_srccompile_srcdir=${java.src}

source_srccompile_includes=**

source_srccompile_excludes=com/cskbank/test/**,com/cskbank/consoleRunner/**,com/cskbank/consoleRunner/**/**

source_srccompile_jar_includes=**

war_jartask=${app.dir}/${product_name}_${product_version}.war,${dest.dir},**,,false
